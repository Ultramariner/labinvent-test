<div class="history-container">
  <h2>История анализов</h2>

  <div *ngIf="loading$ | async">Загрузка...</div>

  <app-notification
    *ngIf="error$ | async as error"
    [type]="'error'"
    [message]="error">
  </app-notification>

  <table *ngIf="!(loading$ | async) && (history$ | async)?.length">
    <thead>
    <tr>
      <th>Имя файла</th>
      <th>Размер (байт)</th>
      <th>Время обработки (мс)</th>
      <th>Среднее</th>
      <th>Ст. отклонение</th>
      <th>Статус</th>
      <th>Действия</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let item of (history$ | async)">
      <td>
        <a [routerLink]="['/history', item.id]">{{ item.fileName }}</a>
      </td>
      <td>{{ item.fileSizeBytes }}</td>
      <td>{{ item.processDurationMillis }}</td>
      <td>{{ item.avg | number:'1.2-2' }}</td>
      <td>{{ item.stdDev | number:'1.2-2' }}</td>
      <td>{{ item.status }}</td>
      <td>
        <button (click)="delete(item.id)">Удалить</button>
      </td>
    </tr>
    </tbody>
  </table>

  <p *ngIf="!(loading$ | async) && !(history$ | async)?.length">
    История пуста
  </p>
</div>
